<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Game Overlay</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
}

#panel {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(0, 0, 0, 0.8);
  padding: 14px 22px;
  border-radius: 14px;
  font-family: Arial, sans-serif;
  font-size: 28px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: 0 2px 6px #000;
}
</style>
</head>

<body>

<div id="panel">Игра 1</div>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
/* === НАСТРОЙКИ SUPABASE === */
const SUPABASE_URL = "https://yctiaoltfmgehjdojhpk.supabase.co";
const SUPABASE_KEY = "sb_publishable_VKqWEzjk6vDmSyKMYz33ow_YoVtFnvW";

/* === ПРАВИЛЬНОЕ СОЗДАНИЕ КЛИЕНТА === */
const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const panel = document.getElementById("panel");

/* === ЗАГРУЗКА НОМЕРА ИГРЫ === */
async function loadGame() {
  const { data, error } = await db
    .from("game_state")
    .select("game_number")
    .eq("id", 1)
    .single();

  if (error) {
    console.error("Supabase error:", error);
    return;
  }

  if (data && typeof data.game_number === "number") {
    panel.textContent = "Игра " + data.game_number;
  }
}

/* === ОБНОВЛЕНИЕ КАЖДЫЕ 500 МС === */
setInterval(loadGame, 500);

/* === ПЕРВЫЙ ЗАПУСК === */
loadGame();
</script>

</body>
</html>
